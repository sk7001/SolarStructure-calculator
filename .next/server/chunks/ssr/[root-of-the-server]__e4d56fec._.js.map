{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../app/lib/panelsDb.tsx","../../../../app/panels/%5Bid%5D/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","import { supabase } from \"./supabaseClient\";\n\nexport type PanelRow = {\n  id: string;\n  user_id: string;\n  name: string;\n  width: number;\n  height: number;\n  description: string;\n  created_at?: string;\n  updated_at?: string;\n};\n\nconst DEFAULT_PANELS: Array<Pick<PanelRow, \"name\" | \"width\" | \"height\" | \"description\">> = [\n  // Put your current “hardcoded” panels here (examples below — replace with yours)\n  { name: \"540W\", width: 89.6, height: 44.7, description: \"Default model\" },\n  { name: \"550W\", width: 89.6, height: 44.7, description: \"Default model\" },\n];\n\nasync function requireUserId() {\n  const { data, error } = await supabase.auth.getUser();\n  if (error) throw error;\n  if (!data?.user?.id) throw new Error(\"Not logged in.\");\n  return data.user.id;\n}\n\n// Load panels from cloud\nexport async function listPanels(): Promise<PanelRow[]> {\n  await requireUserId();\n\n  const { data, error } = await supabase\n    .from(\"panels\")\n    .select(\"*\")\n    .order(\"created_at\", { ascending: false });\n\n  if (error) throw error;\n  return (data || []) as PanelRow[];\n}\n\n// Seed default panels ONCE per user (safe to call many times)\nexport async function seedDefaultPanelsIfEmpty() {\n  const userId = await requireUserId();\n\n  const existing = await listPanels();\n  if (existing.length > 0) return;\n\n  // Upsert so it won’t create duplicates if you rerun\n  const { error } = await supabase\n    .from(\"panels\")\n    .upsert(\n      DEFAULT_PANELS.map((p) => ({\n        user_id: userId,\n        name: p.name,\n        width: p.width,\n        height: p.height,\n        description: p.description ?? \"\",\n      })),\n      { onConflict: \"user_id,name\" }\n    );\n\n  if (error) throw error;\n}\n\nexport async function createPanel(input: {\n  name: string;\n  width: number;\n  height: number;\n  description?: string;\n}) {\n  const userId = await requireUserId();\n\n  const { data, error } = await supabase\n    .from(\"panels\")\n    .insert([\n      {\n        user_id: userId,\n        name: input.name.trim(),\n        width: Number(input.width),\n        height: Number(input.height),\n        description: (input.description ?? \"\").trim(),\n      },\n    ])\n    .select(\"*\")\n    .single();\n\n  if (error) throw error;\n  return data as PanelRow;\n}\n\nexport async function getPanelById(id: string) {\n  await requireUserId();\n\n  const { data, error } = await supabase.from(\"panels\").select(\"*\").eq(\"id\", id).single();\n  if (error) throw error;\n  return data as PanelRow;\n}\n\nexport async function updatePanel(\n  id: string,\n  patch: { name: string; width: number; height: number; description?: string }\n) {\n  await requireUserId();\n\n  const { data, error } = await supabase\n    .from(\"panels\")\n    .update({\n      name: patch.name.trim(),\n      width: Number(patch.width),\n      height: Number(patch.height),\n      description: (patch.description ?? \"\").trim(),\n      updated_at: new Date().toISOString(),\n    })\n    .eq(\"id\", id)\n    .select(\"*\")\n    .single();\n\n  if (error) throw error;\n  return data as PanelRow;\n}\n\nexport async function deletePanel(id: string) {\n  await requireUserId();\n\n  const { error } = await supabase.from(\"panels\").delete().eq(\"id\", id);\n  if (error) throw error;\n  return true;\n}\n","\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\nimport { useParams, useRouter } from \"next/navigation\";\nimport { deletePanel, getPanelById, updatePanel, type PanelRow } from \"../../lib/panelsDb\";\n\nconst fieldClass =\n  \"w-full h-14 rounded-lg bg-gray-800 text-gray-100 border border-gray-700 px-4 \" +\n  \"text-base outline-none focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30\";\n\nconst cardClass = \"bg-gray-900 rounded-xl shadow-lg border border-gray-800\";\n\nexport default function EditPanelPage() {\n  const params = useParams();\n  const router = useRouter();\n  const id = String(params?.id || \"\");\n\n  const [loading, setLoading] = useState(true);\n  const [panel, setPanel] = useState<PanelRow | null>(null);\n\n  const [name, setName] = useState(\"\");\n  const [width, setWidth] = useState(\"\");\n  const [height, setHeight] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n\n  useEffect(() => {\n    (async () => {\n      try {\n        setLoading(true);\n        const p = await getPanelById(id);\n        setPanel(p);\n\n        setName(p.name || \"\");\n        setWidth(String(p.width ?? \"\"));\n        setHeight(String(p.height ?? \"\"));\n        setDescription(p.description || \"\");\n      } catch (e: any) {\n        setPanel(null);\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, [id]);\n\n  const onSave = async () => {\n    if (!name || !width || !height) {\n      alert(\"Please fill Name, Width, Height.\");\n      return;\n    }\n\n    try {\n      await updatePanel(id, {\n        name,\n        width: Number(width),\n        height: Number(height),\n        description,\n      });\n      router.push(\"/panels\");\n    } catch (e: any) {\n      alert(e?.message || \"Failed to save.\");\n    }\n  };\n\n  const onDelete = async () => {\n    const ok = confirm(\"Delete this panel model?\");\n    if (!ok) return;\n\n    try {\n      await deletePanel(id);\n      router.push(\"/panels\");\n    } catch (e: any) {\n      alert(e?.message || \"Failed to delete.\");\n    }\n  };\n\n  return (\n    <div className=\"bg-gray-950 min-h-screen text-gray-100\">\n      <div className=\"max-w-3xl mx-auto p-6\">\n        <div className=\"flex items-center justify-between gap-3\">\n          <h1 className=\"text-2xl font-bold\">Edit panel</h1>\n          <Link\n            href=\"/panels\"\n            className=\"rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors px-4 py-2 border border-gray-700\"\n          >\n            Back\n          </Link>\n        </div>\n\n        <div className={`${cardClass} p-6 mt-6`}>\n          {loading ? (\n            <div className=\"text-gray-400\">Loading...</div>\n          ) : !panel ? (\n            <div className=\"text-gray-400\">\n              Panel not found.{\" \"}\n              <Link className=\"underline\" href=\"/panels\">\n                Go back\n              </Link>\n            </div>\n          ) : (\n            <>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-gray-300 mb-2\">Name</label>\n                  <input value={name} onChange={(e) => setName(e.target.value)} className={fieldClass} />\n                </div>\n\n                <div>\n                  <label className=\"block text-gray-300 mb-2\">Description</label>\n                  <input value={description} onChange={(e) => setDescription(e.target.value)} className={fieldClass} />\n                </div>\n\n                <div>\n                  <label className=\"block text-gray-300 mb-2\">Width (in)</label>\n                  <input type=\"number\" value={width} onChange={(e) => setWidth(e.target.value)} className={fieldClass} />\n                </div>\n\n                <div>\n                  <label className=\"block text-gray-300 mb-2\">Height (in)</label>\n                  <input type=\"number\" value={height} onChange={(e) => setHeight(e.target.value)} className={fieldClass} />\n                </div>\n              </div>\n\n              <button\n                type=\"button\"\n                onClick={onSave}\n                className=\"mt-4 w-full bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white px-4 py-3 rounded-lg shadow-md transition\"\n              >\n                Save Changes (Cloud)\n              </button>\n\n              <button\n                type=\"button\"\n                onClick={onDelete}\n                className=\"mt-3 w-full bg-red-600 hover:bg-red-700 active:bg-red-800 text-white px-4 py-3 rounded-lg shadow-md transition\"\n              >\n                Delete Panel Model (Cloud)\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml"],"mappings":"gjBAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACC,kBAAkB,+BCFzCJ,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACE,kBAAkB,yBCFzC,IAAA,EAAA,EAAA,CAAA,CAAA,OAaA,IAAM,EAAqF,CAEzF,CAAE,KAAM,OAAQ,MAAO,KAAM,OAAQ,KAAM,YAAa,eAAgB,EACxE,CAAE,KAAM,OAAQ,MAAO,KAAM,OAAQ,KAAM,YAAa,eAAgB,EACzE,CAED,eAAe,IACb,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CAAC,IAAI,CAAC,OAAO,GACnD,GAAI,EAAO,MAAM,EACjB,GAAI,CAAC,GAAM,MAAM,GAAI,MAAU,AAAJ,MAAU,kBACrC,OAAO,EAAK,IAAI,CAAC,EAAE,AACrB,CAGO,eAAe,IACpB,MAAM,IAEN,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CACnC,IAAI,CAAC,UACL,MAAM,CAAC,KACP,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GAE1C,GAAI,EAAO,MAAM,EACjB,OAAQ,GAAQ,EAAE,AACpB,CAGO,eAAe,IACpB,IAAM,EAAS,MAAM,IAGrB,GAAI,CADa,MAAM,GAAA,EACV,MAAM,CAAG,EAAG,OAGzB,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CAC7B,IAAI,CAAC,UACL,MAAM,CACL,EAAe,GAAG,CAAC,AAAC,IAAM,AAAC,CACzB,QAAS,EACT,KAAM,EAAE,IAAI,CACZ,MAAO,EAAE,KAAK,CACd,OAAQ,EAAE,MAAM,CAChB,YAAa,EAAE,WAAW,EAAI,GAChC,CAAC,EACD,CAAE,WAAY,cAAe,GAGjC,GAAI,EAAO,MAAM,CACnB,CAEO,eAAe,EAAY,CAKjC,EACC,IAAM,EAAS,MAAM,IAEf,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CACnC,IAAI,CAAC,UACL,MAAM,CAAC,CACN,CACE,QAAS,EACT,KAAM,EAAM,IAAI,CAAC,IAAI,GACrB,MAAO,OAAO,EAAM,KAAK,EACzB,OAAQ,OAAO,EAAM,MAAM,EAC3B,YAAa,CAAC,EAAM,WAAW,EAAI,EAAA,CAAE,CAAE,IAAI,EAC7C,EACD,EACA,MAAM,CAAC,KACP,MAAM,GAET,GAAI,EAAO,MAAM,EACjB,OAAO,CACT,CAEO,eAAe,EAAa,CAAU,EAC3C,MAAM,IAEN,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CAAC,IAAI,CAAC,UAAU,MAAM,CAAC,KAAK,EAAE,CAAC,KAAM,GAAI,MAAM,GACrF,GAAI,EAAO,MAAM,EACjB,OAAO,CACT,CAEO,eAAe,EACpB,CAAU,CACV,CAA4E,EAE5E,MAAM,IAEN,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CACnC,IAAI,CAAC,UACL,MAAM,CAAC,CACN,KAAM,EAAM,IAAI,CAAC,IAAI,GACrB,MAAO,OAAO,EAAM,KAAK,EACzB,OAAQ,OAAO,EAAM,MAAM,EAC3B,YAAa,CAAC,EAAM,WAAW,EAAI,EAAA,CAAE,CAAE,IAAI,GAC3C,WAAY,IAAI,OAAO,WAAW,EACpC,GACC,EAAE,CAAC,KAAM,GACT,MAAM,CAAC,KACP,MAAM,GAET,GAAI,EAAO,MAAM,EACjB,OAAO,CACT,CAEO,eAAe,EAAY,CAAU,EAC1C,MAAM,IAEN,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CAAC,IAAI,CAAC,UAAU,MAAM,GAAG,EAAE,CAAC,KAAM,GAClE,GAAI,EAAO,MAAM,EACjB,OAAO,CACT,sLC5HA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEA,IAAM,EACJ,kFACA,iGAIa,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAK,OAAO,GAAQ,IAAM,IAE1B,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAA0B,MAE9C,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC3B,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7B,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC/B,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAE/C,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,CAAC,UACC,GAAI,CACF,GAAW,GACX,IAAM,EAAI,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,GAC7B,EAAS,GAET,EAAQ,EAAE,IAAI,EAAI,IAClB,EAAS,OAAO,EAAE,KAAK,EAAI,KAC3B,EAAU,OAAO,EAAE,MAAM,EAAI,KAC7B,EAAe,EAAE,WAAW,EAAI,GAClC,CAAE,MAAO,EAAQ,CACf,EAAS,KACX,QAAU,CACR,GAAW,EACb,EACF,CAAC,EACH,EAAG,CAAC,EAAG,EAEP,IAAM,EAAS,UACb,GAAI,CAAC,GAAQ,CAAC,GAAS,CAAC,EAAQ,YAC9B,MAAM,oCAIR,GAAI,CACF,MAAM,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,EAAI,MACpB,EACA,MAAO,OAAO,GACd,OAAQ,OAAO,eACf,CACF,GACA,EAAO,IAAI,CAAC,UACd,CAAE,MAAO,EAAQ,CACf,MAAM,GAAG,SAAW,kBACtB,CACF,EAEM,EAAW,UAEf,GADW,CACP,CAAC,IAAI,EADU,4BAGnB,GAAI,CACF,MAAM,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,GAClB,EAAO,IAAI,CAAC,UACd,CAAE,MAAO,EAAQ,CACf,MAAM,GAAG,SAAW,oBACtB,CACF,EAEA,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,eACnC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,UACL,UAAU,uGACX,YAKH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,GAAG,UAAU,SAAS,CAAC,qDACpC,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBAAgB,eAC7B,AAAC,EAQH,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,oCAA2B,SAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,MAAO,EAAM,SAAU,AAAC,GAAM,EAAQ,EAAE,MAAM,CAAC,KAAK,EAAG,UAAW,OAG3E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,oCAA2B,gBAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,MAAO,EAAa,SAAU,AAAC,GAAM,EAAe,EAAE,MAAM,CAAC,KAAK,EAAG,UAAW,OAGzF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,oCAA2B,eAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,SAAS,MAAO,EAAO,SAAU,AAAC,GAAM,EAAS,EAAE,MAAM,CAAC,KAAK,EAAG,UAAW,OAG3F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,oCAA2B,gBAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,SAAS,MAAO,EAAQ,SAAU,AAAC,GAAM,EAAU,EAAE,MAAM,CAAC,KAAK,EAAG,UAAW,UAI/F,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,QAAS,EACT,UAAU,6HACX,yBAID,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,QAAS,EACT,UAAU,0HACX,kCA1CH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BAAgB,mBACZ,IACjB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,UAAU,YAAY,KAAK,mBAAU,qBAiDzD","ignoreList":[0,1]}