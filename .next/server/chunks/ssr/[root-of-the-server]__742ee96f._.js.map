{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../app/lib/panelsDb.tsx","../../../../app/lib/projectsDb.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","import { supabase } from \"./supabaseClient\";\n\nexport type PanelRow = {\n  id: string;\n  user_id: string;\n  name: string;\n  width: number;\n  height: number;\n  description: string;\n  created_at?: string;\n  updated_at?: string;\n};\n\nconst DEFAULT_PANELS: Array<Pick<PanelRow, \"name\" | \"width\" | \"height\" | \"description\">> = [\n  // Put your current “hardcoded” panels here (examples below — replace with yours)\n  { name: \"540W\", width: 89.6, height: 44.7, description: \"Default model\" },\n  { name: \"550W\", width: 89.6, height: 44.7, description: \"Default model\" },\n];\n\nasync function requireUserId() {\n  const { data, error } = await supabase.auth.getUser();\n  if (error) throw error;\n  if (!data?.user?.id) throw new Error(\"Not logged in.\");\n  return data.user.id;\n}\n\n// Load panels from cloud\nexport async function listPanels(): Promise<PanelRow[]> {\n  await requireUserId();\n\n  const { data, error } = await supabase\n    .from(\"panels\")\n    .select(\"*\")\n    .order(\"created_at\", { ascending: false });\n\n  if (error) throw error;\n  return (data || []) as PanelRow[];\n}\n\n// Seed default panels ONCE per user (safe to call many times)\nexport async function seedDefaultPanelsIfEmpty() {\n  const userId = await requireUserId();\n\n  const existing = await listPanels();\n  if (existing.length > 0) return;\n\n  // Upsert so it won’t create duplicates if you rerun\n  const { error } = await supabase\n    .from(\"panels\")\n    .upsert(\n      DEFAULT_PANELS.map((p) => ({\n        user_id: userId,\n        name: p.name,\n        width: p.width,\n        height: p.height,\n        description: p.description ?? \"\",\n      })),\n      { onConflict: \"user_id,name\" }\n    );\n\n  if (error) throw error;\n}\n\nexport async function createPanel(input: {\n  name: string;\n  width: number;\n  height: number;\n  description?: string;\n}) {\n  const userId = await requireUserId();\n\n  const { data, error } = await supabase\n    .from(\"panels\")\n    .insert([\n      {\n        user_id: userId,\n        name: input.name.trim(),\n        width: Number(input.width),\n        height: Number(input.height),\n        description: (input.description ?? \"\").trim(),\n      },\n    ])\n    .select(\"*\")\n    .single();\n\n  if (error) throw error;\n  return data as PanelRow;\n}\n\nexport async function getPanelById(id: string) {\n  await requireUserId();\n\n  const { data, error } = await supabase.from(\"panels\").select(\"*\").eq(\"id\", id).single();\n  if (error) throw error;\n  return data as PanelRow;\n}\n\nexport async function updatePanel(\n  id: string,\n  patch: { name: string; width: number; height: number; description?: string }\n) {\n  await requireUserId();\n\n  const { data, error } = await supabase\n    .from(\"panels\")\n    .update({\n      name: patch.name.trim(),\n      width: Number(patch.width),\n      height: Number(patch.height),\n      description: (patch.description ?? \"\").trim(),\n      updated_at: new Date().toISOString(),\n    })\n    .eq(\"id\", id)\n    .select(\"*\")\n    .single();\n\n  if (error) throw error;\n  return data as PanelRow;\n}\n\nexport async function deletePanel(id: string) {\n  await requireUserId();\n\n  const { error } = await supabase.from(\"panels\").delete().eq(\"id\", id);\n  if (error) throw error;\n  return true;\n}\n","import { supabase } from \"./supabaseClient\";\n\nexport type ProjectRow = {\n  id: string;\n  user_id: string;\n  name: string;\n  inputs: {\n    frontLegHeight: string;\n    numberOfPanels: string;\n    selectedPanelModel: string;\n    isVertical: boolean;\n  };\n  results: any; // your complex results object\n  created_at?: string;\n  updated_at?: string;\n};\n\nasync function requireUserId() {\n  const { data, error } = await supabase.auth.getUser();\n  if (error) throw error;\n  if (!data?.user?.id) throw new Error(\"Not logged in.\");\n  return data.user.id;\n}\n\n// List all projects (for /projects page later)\nexport async function listProjects(): Promise<ProjectRow[]> {\n  await requireUserId();\n\n  const { data, error } = await supabase\n    .from(\"projects\")\n    .select(\"*\")\n    .order(\"created_at\", { ascending: false });\n\n  if (error) throw error;\n  return (data || []) as ProjectRow[];\n}\n\n// Get single project by ID\nexport async function getProjectById(id: string): Promise<ProjectRow> {\n  await requireUserId();\n\n  const { data, error } = await supabase.from(\"projects\").select(\"*\").eq(\"id\", id).single();\n  if (error) throw error;\n  return data as ProjectRow;\n}\n\n// Create new project (your \"Save Project\" button)\nexport async function createProject(input: {\n  name: string;\n  inputs: any;\n  results?: any;\n}): Promise<ProjectRow> {\n  const userId = await requireUserId();\n\n  const { data, error } = await supabase\n    .from(\"projects\")\n    .insert([\n      {\n        user_id: userId,\n        name: input.name.trim(),\n        inputs: input.inputs || {},\n        results: input.results ?? null,\n      },\n    ])\n    .select(\"*\")\n    .single();\n\n  if (error) throw error;\n  return data as ProjectRow;\n}\n\n// Update project (for /projects page editing later)\nexport async function updateProject(\n  id: string,\n  patch: { name: string; inputs?: any; results?: any }\n): Promise<ProjectRow> {\n  await requireUserId();\n\n  const { data, error } = await supabase\n    .from(\"projects\")\n    .update({\n      name: patch.name.trim(),\n      inputs: patch.inputs,\n      results: patch.results ?? null,\n      updated_at: new Date().toISOString(),\n    })\n    .eq(\"id\", id)\n    .select(\"*\")\n    .single();\n\n  if (error) throw error;\n  return data as ProjectRow;\n}\n\n// Delete project\nexport async function deleteProject(id: string) {\n  await requireUserId();\n\n  const { error } = await supabase.from(\"projects\").delete().eq(\"id\", id);\n  if (error) throw error;\n  return true;\n}\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1]}