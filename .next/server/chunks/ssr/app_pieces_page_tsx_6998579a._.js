module.exports=[54707,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(70517);async function f(){let{data:a,error:b}=await e.supabase.auth.getUser();if(b)throw b;if(!a?.user?.id)throw Error("Not logged in.");return a.user.id}async function g(){await f();let{data:a,error:b}=await e.supabase.from("pieces").select("*").order("created_at",{ascending:!1});if(b)throw b;return a||[]}async function h(a){let b=await f(),{data:c,error:d}=await e.supabase.from("pieces").insert([{user_id:b,len:Number(a.len),qty:Number(a.qty),note:(a.note??"").trim()}]).select("*").single();if(d)throw d;return c}async function i(a){await f();let{error:b}=await e.supabase.from("pieces").delete().eq("id",a);if(b)throw b;return!0}async function j(){let a=await f(),{error:b}=await e.supabase.from("pieces").delete().eq("user_id",a);if(b)throw b;return!0}let k="w-full h-14 rounded-lg bg-gray-800 text-gray-100 border border-gray-700 px-4 text-base outline-none focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/30",l="bg-gray-900 rounded-xl shadow-lg border border-gray-800";function m(){let[a,e]=(0,c.useState)([]),[f,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(""),t=async()=>{e(await g())};(0,c.useEffect)(()=>{(async()=>{try{m(!0),await t()}catch(a){alert(a?.message||"Failed to load pieces from cloud.")}finally{m(!1)}})()},[]);let u=(0,c.useMemo)(()=>({lines:a.length,totalQty:a.reduce((a,b)=>a+(Number(b.qty)||0),0)}),[a]),v=async()=>{if(!n||!p)return void alert("Please fill Length and Quantity.");let a=Number(n),b=parseInt(p,10);if(!(a>0)||!(b>0))return void alert("Length and Quantity must be > 0.");try{await h({len:a,qty:b,note:r}),await t(),o(""),q(""),s("")}catch(a){alert(a?.message||"Failed to add piece.")}},w=async a=>{if(confirm("Delete this inventory line?"))try{await i(a),await t()}catch(a){alert(a?.message||"Failed to delete.")}},x=async()=>{if(confirm("Clear ALL usable pieces inventory?"))try{await j(),await t()}catch(a){alert(a?.message||"Failed to clear.")}};return(0,b.jsx)("div",{className:"bg-gray-950 min-h-screen text-gray-100",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Usable Pieces (Inventory)"}),(0,b.jsx)(d.default,{href:"/",className:"rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors px-4 py-2 border border-gray-700",children:"Back"})]}),(0,b.jsxs)("div",{className:`${l} p-6 mt-6`,children:[(0,b.jsxs)("div",{className:"text-gray-300 text-sm",children:["Saved lines: ",(0,b.jsx)("span",{className:"text-gray-100 font-semibold",children:u.lines})," | Total qty:"," ",(0,b.jsx)("span",{className:"text-gray-100 font-semibold",children:u.totalQty})]}),(0,b.jsx)("h2",{className:"text-xl font-semibold mt-4 mb-4",children:"Add usable piece"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-gray-300 mb-2",children:"Length (inches)"}),(0,b.jsx)("input",{type:"number",value:n,onChange:a=>o(a.target.value),className:k})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-gray-300 mb-2",children:"Quantity"}),(0,b.jsx)("input",{type:"number",value:p,onChange:a=>q(a.target.value),className:k})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"block text-gray-300 mb-2",children:"Note (optional)"}),(0,b.jsx)("input",{value:r,onChange:a=>s(a.target.value),className:k})]})]}),(0,b.jsx)("button",{type:"button",onClick:v,className:"mt-4 w-full bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white px-4 py-3 rounded-lg shadow-md transition",children:"Add to inventory (Cloud)"}),(0,b.jsx)("button",{type:"button",onClick:x,className:"mt-3 w-full bg-red-600 hover:bg-red-700 active:bg-red-800 text-white px-4 py-3 rounded-lg shadow-md transition",children:"Clear inventory (Cloud)"})]}),(0,b.jsxs)("div",{className:`${l} p-6 mt-6`,children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Saved usable pieces"}),f?(0,b.jsx)("div",{className:"text-gray-400",children:"Loading..."}):0===a.length?(0,b.jsx)("div",{className:"text-gray-400",children:"No saved pieces."}):(0,b.jsx)("div",{className:"space-y-3",children:a.map(a=>(0,b.jsxs)("div",{className:"rounded-xl border border-gray-800 bg-gray-950/40 p-4 flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"text-gray-100 font-semibold",children:[a.len,'" Ã— ',a.qty]}),a.note?(0,b.jsx)("div",{className:"text-gray-400 text-sm mt-1",children:a.note}):null]}),(0,b.jsx)("button",{type:"button",onClick:()=>w(a.id),className:"shrink-0 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors px-4 py-2 border border-gray-700",children:"Delete"})]},a.id))})]})]})})}a.s(["default",()=>m],54707)}];

//# sourceMappingURL=app_pieces_page_tsx_6998579a._.js.map